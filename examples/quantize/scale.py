import matplotlib.pyplot as plt

# Generated by quantizing the entire 7B model with the first element of each tuple as the scale factor.
# The second element of the tuple is the number of q4_0 blocks for which that scale factor has lowest RMSE.
data = (
    (-10.0, 0),
    (-9.9, 1),
    (-9.8, 3),
    (-9.7, 65),
    (-9.6, 738),
    (-9.5, 5779),
    (-9.4, 30880),
    (-9.3, 121078),
    (-9.2, 375674),
    (-9.1, 941350),
    (-9.0, 1990278),
    (-8.9, 3635317),
    (-8.8, 5891752),
    (-8.7, 8678748),
    (-8.6, 11771759),
    (-8.5, 14873993),
    (-8.4, 17594260),
    (-8.3, 19553100),
    (-8.2, 20415428),
    (-8.1, 20017134),
    (-8.0, 18357204),
    (-7.9, 15597612),
    (-7.8, 11993688),
    (-7.7, 7842970),
    (-7.6, 2880878),
    (-7.5, 3478),
    (-7.4, 2648437),
    (-7.3, 5641970),
    (-7.2, 5935890),
    (-7.1, 4910790),
    (-7.0, 3425891),
    (-6.9, 2068250),
    (-6.8, 1089883),
    (-6.7, 502462),
    (-6.6, 156356),
    (-6.5, 205),
    (-6.4, 163500),
    (-6.3, 386291),
    (-6.2, 423018),
    (-6.1, 319360),
    (-6.0, 180783),
    (-5.9, 78822),
    (-5.8, 28254),
    (-5.7, 8698),
    (-5.6, 1969),
    (-5.5, 0),
    (-5.4, 2069),
    (-5.3, 5722),
    (-5.2, 7107),
    (-5.1, 5113),
    (-5.0, 2332),
    (-4.9, 636),
    (-4.8, 130),
    (-4.7, 12),
    (-4.6, 1),
    (-4.5, 0),
    (-4.4, 3),
    (-4.3, 4),
    (-4.2, 8),
    (-4.1, 8),
    (-4.0, 27),
)
x, y = zip(*data)

fig, ax = plt.subplots()
b = ax.bar(x, y, 0.1, bottom=1)
ax.set_yscale("log")
ax.set_xlabel("scale")
ax.set_ylabel("N")
plt.title("Quantization scale factor with lowest RMS error")
plt.show()
